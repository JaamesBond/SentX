# ARCH-001: Major Architecture Revision — Research Platform v3.0

| Field | Value |
|-------|-------|
| **Change ID** | ARCH-001 |
| **Date** | 2026-02-20 |
| **Agent** | Master Architect |
| **Status** | Complete |
| **Reviewed By** | N/A (architectural change, human-directed) |
| **Security Cleared** | N/A (documentation only) |

---

## Context

Major revision to shift the platform from an ML/AI-driven security system to a research-focused platform emphasizing deep packet analysis and Software-Defined Networking. Team scaled from 1 to 7 people.

---

## Changes Made

| File | Action | Purpose |
|------|--------|---------|
| `docs/TECHNICAL-ARCHITECTURE.md` | Rewritten (v2.0 → v3.0) | Remove ML pipeline, AI agents, Pyramid of Pain; add SDN layer, Packet Analysis layer |
| `docs/EXECUTION-PLAN.md` | Rewritten (v2.0 → v3.0) | Scale to 7-person team, remove ML/AI phases, add protocol research and SDN phases |
| `docs/course-alignment-matrix.md` | Updated | Remove Pyramid of Pain as framework, add SDN/Packet Analysis innovations, update cost |
| `CLAUDE.md` | Updated | Reflect new 6-layer architecture, 7-person team, SDN/packet analysis focus |
| `.claude/agents.md` | Updated | Remove ML/AI Pipeline Agent, update Detection Agent for OT protocols |

---

## Architectural Decisions

### Removed
- ML Pipeline (Isolation Forest, LSTM, GNN, XGBoost, MLOps)
- 6 Autonomous AI Agents (L1–L6 Pyramid of Pain)
- Pyramid of Pain as organizational framework
- AWS Bedrock / LLM API costs

### Added
- **Layer 2: SDN & Network Infrastructure** — OpenVSwitch 3.x + ONOS SDN Controller
  - Per-VLAN dynamic port mirroring (replaces static SPAN)
  - Intent-based microsegmentation (OpenFlow 1.3)
  - Analyst-triggered IT device isolation via REST API
- **Deep Packet Analysis Research Track**
  - 13 custom Zeek scripts for OT protocols (Modbus, OPC UA, EtherNet/IP)
  - PCAP ring buffer (2GB) with tshark/Wireshark forensics
  - Statistical detectors: C2 beaconing (CV), DGA (entropy), exfiltration (Z-score)
- **Research Framework** — 4 formal research questions with measurable outcomes

### Modified
- Architecture: 8 layers → 6 layers
- Team: 1 engineer → 7 people with defined roles
- Cost: $404–454/month → ~$178/month (no Bedrock API)
- Lambda pipeline: 8 stages → 7 stages (removed ML feature extraction)
- Detection framework: Pyramid of Pain → MITRE ATT&CK for ICS (primary)

---

## Verification

- [x] All 52 course requirements still met (course-alignment-matrix.md verified)
- [x] OT safety constraints preserved (no automated OT isolation)
- [x] MITRE ATT&CK for ICS 81/81 techniques still covered
- [x] Architecture diagrams updated throughout
- [x] 7-person team roles defined with weekly assignments

---

## For Other Agents

- ML/AI Pipeline Agent is **removed** — no longer in scope
- Detection Engineering Agent now owns OT protocol Zeek scripts (primary research contribution)
- Infrastructure Agent now includes SDN infrastructure (OVS, ONOS Docker deployment)
- Frontend Agent visualizes SDN flow monitor instead of Pyramid heatmap
- No ML model registry, no S3 model versioning
- Cost target is ~$178/month (no Bedrock API costs)

---

## Related

- See `docs/TECHNICAL-ARCHITECTURE.md` v3.0 for complete design
- See `docs/EXECUTION-PLAN.md` v3.0 for 7-person 22-week timeline
